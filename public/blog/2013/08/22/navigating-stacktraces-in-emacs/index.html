<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> Navigating Stacktraces in Emacs &middot; Sadique Ali </title>

  
  <link rel="stylesheet" href="http://sdqali.in/css/poole.css">
  <link rel="stylesheet" href="http://sdqali.in/css/syntax.css">
  <link rel="stylesheet" href="http://sdqali.in/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Sadique Ali" />

</head>


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@sdqali">
<meta name="twitter:creator" content="@sdqali">
<meta name="twitter:title" content="Navigating Stacktraces in Emacs">
<meta name="twitter:description" content="I had to debug an issue today and that meant dealing with Rails stack traces. I got tired of having to constantly switch between reading the trace in the terminal and the code in Emacs to figure out what was going wrong and get more context around it. I felt that there should be an easier way of doing this. A quick search [^1] did not yield anything. But then I remembered Grep mode [^2] and it occurred to me that hijacking Grep mode&rsquo;s navigation feature would let me navigate the stack trace better. This is the solution I came up with.
">
<meta name="twitter:image" content="http://sdqali.in/map[feature:/images/threaded-blue-on-black-cropped.jpg]">

<body class="theme-base-0b">

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
	<a href="/">Sadique Ali</a>
      </h1>
      <p class="lead">
       A blog about the Code I write and the Technologies I use. And other things that interest me. 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      <li><a href="/blog/">Blog</a> </li>
      <li><a href="/about">About</a> </li>
      <li><a href="https://github.com/sdqali">GitHub</a> </li>
      <li><a href="https://twitter.com/sdqali">Twitter</a> </li>
      <li><a href="https://www.linkedin.com/in/sdqali">LinkedIn</a> </li>
      
    </ul>

    <p>&copy; 2015. All rights reserved. </p>
  </div>
</div>


    <div class="content container">
<div class="post">
  <h1>Navigating Stacktraces in Emacs</h1>
  <span class="post-date">Thu, Aug 22, 2013</span>
      <p>I had to debug an issue today and that meant dealing with Rails stack traces. I got tired of having to constantly switch between reading the trace in the terminal and the code in Emacs to figure out what was going wrong and get more context around it. I felt that there should be an easier way of doing this. A quick search <sup class="footnote-ref" id="fnref:29e1a25627ff5adc25c49a09c3db5253:1"><a rel="footnote" href="#fn:29e1a25627ff5adc25c49a09c3db5253:1">1</a></sup> did not yield anything. But then I remembered Grep mode <sup class="footnote-ref" id="fnref:29e1a25627ff5adc25c49a09c3db5253:2"><a rel="footnote" href="#fn:29e1a25627ff5adc25c49a09c3db5253:2">2</a></sup> and it occurred to me that hijacking Grep mode&rsquo;s navigation feature would let me navigate the stack trace better. This is the solution I came up with.</p>

<ul>
<li>Open the log in a buffer.</li>
<li>Replace any leading file paths in the logs with the appropriate path for your local copy of the code. In the following case, I would replace all <code>/opt/thoughtworks/mingle</code> with empty string <sup class="footnote-ref" id="fnref:29e1a25627ff5adc25c49a09c3db5253:3"><a rel="footnote" href="#fn:29e1a25627ff5adc25c49a09c3db5253:3">3</a></sup>.</li>
</ul>

<pre><code class="language-bash">/opt/thoughtworks/mingle/app/models/foo.rb:46:in 'compare_bar'
/opt/thoughtworks/mingle/app/controllers/foos_controller.rb:42:in 'validate_bar'
...
</code></pre>

<ul>
<li>Load the Grep mode with <code>M-x grep-mode</code></li>
</ul>

<p>Now I can easily press <code>Enter</code> on the lines of the stack trace and Emacs will navigate to the correct source file and line number.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:29e1a25627ff5adc25c49a09c3db5253:1">I almost wrote &ldquo;quick google&rdquo;, but then remembered that I no longer use Google that much. <a href="http://duckduckgo.com">DuckDuckGo</a> has been my preferred search engine for a while.
 <a class="footnote-return" href="#fnref:29e1a25627ff5adc25c49a09c3db5253:1"><sup>[return]</sup></a></li>
<li id="fn:29e1a25627ff5adc25c49a09c3db5253:2">Grep mode is an Emacs mode used by the <a href="http://www.emacswiki.org/emacs/GrepMode">Grep</a> command to display the results of a search. It populates the buffer with file paths and line numbers that let the user navigate to lines in the code base.
 <a class="footnote-return" href="#fnref:29e1a25627ff5adc25c49a09c3db5253:2"><sup>[return]</sup></a></li>
<li id="fn:29e1a25627ff5adc25c49a09c3db5253:3">Typically logs are long and you may want to use <code>replace-string</code> instead of the default <code>query-replace</code> for searching and replacing text. The former replaces strings without asking for confirmation while the latter asks you to confirm each replace operation. The latter has it&rsquo;s use, but this use case calls for the former.
 <a class="footnote-return" href="#fnref:29e1a25627ff5adc25c49a09c3db5253:3"><sup>[return]</sup></a></li>
</ol>
</div>

</div>
</div>

  </body>
</html>
