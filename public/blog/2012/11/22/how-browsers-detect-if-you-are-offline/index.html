<!DOCTYPE html5>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us" prefix="og: http://ogp.me/ns#">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>How Browsers Detect If You Are Offline</title>

    
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    
    <link href="/css/clean-blog.min.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    
    
    

</head>

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@sdqali">
  <meta name="twitter:creator" content="@sdqali">
  <meta name="twitter:title" content="How Browsers Detect If You Are Offline">
  <meta name="twitter:description" content="When I saw the newly released Heyoffline.js library, I was curious to see how it figured out if the user was online or not. This led me to the window.navigator.onLine API and how different browsers implement it. Chrome, Safari and Inernet Explorer 10 make sure that the API detects if the user is connected to a network, while Firefox changes this flag if and only if the user chooses the Work Offline option.">
  <meta name="twitter:image" content="http://sdqali.in/map[feature:/images/threaded-blue-on-black-cropped.jpg]">

  <meta property="og:title" content="How Browsers Detect If You Are Offline" />
  <meta property="og:description" content="When I saw the newly released Heyoffline.js library, I was curious to see how it figured out if the user was online or not. This led me to the window.navigator.onLine API and how different browsers implement it. Chrome, Safari and Inernet Explorer 10 make sure that the API detects if the user is connected to a network, while Firefox changes this flag if and only if the user chooses the Work Offline option." itemprop="description"/>
  <meta property="og:url" content="http://sdqali.in/blog/2012/11/22/how-browsers-detect-if-you-are-offline/" />
  <meta property="og:image" content="http://sdqali.in/map[feature:/images/threaded-blue-on-black-cropped.jpg]" />
  <body>

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Sadique Ali</a>
    </div>

    
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/">Home</a> </li>
        <li><a href="/blog/">Blog</a> </li>
        <li><a href="/about">About</a> </li>
        <li><a href="/index.xml">Atom Feed</a> </li>
        <li><a href="https://github.com/sdqali">GitHub</a> </li>
        <li><a href="https://twitter.com/sdqali">Twitter</a> </li>
        <li><a href="https://www.linkedin.com/in/sdqali">LinkedIn</a> </li>
      </ul>
    </div>
    
  </div>
  
</nav>




    
    
    <header class="intro-header">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="site-heading">
              <h1> How Browsers Detect If You Are Offline</h1>
              <span class="meta">Thu, Nov 22, 2012</span>
            </div>
          </div>
        </div>
      </div>
    </header>


    
    <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <p>When I saw the newly released
<a href="http://oskarkrawczyk.github.com/heyoffline.js/">Heyoffline.js</a> library,
I was curious to see how it figured out if the user was online or
not. This led me to the <code>window.navigator.onLine</code> <a href="https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine">API</a> and how
different browsers implement it. Chrome, Safari and Inernet Explorer 10
make sure that the API detects if the user is connected to a network,
while Firefox changes this flag if and only if the user chooses the
<code>Work Offline</code> option. A detailed discussion of this difference in
implementation is available
<a href="http://schalk-neethling.com/2011/05/navigator-online-and-the-differing-implementations-of-a-standard/">here</a>.</p>

<p>While this is an interesting example of how despite the efforts put into
standardising specifications they get interpreted differently, I was
more interested in seeing how different browsers detect if the user is
offline or not.</p>

<p>I did some digging around and this is what I found:</p>

<ul>
<li>I expected Internet Explorer to use the <a href="http://blog.superuser.com/2011/05/16/windows-7-network-awareness/">Network Connectivity Status
Indicator</a>
service. It looks like that is not the case. Setting the registry
entry
<code>HKEY_LOCAL_MACHINESYSTEM\CurrentControlSet\Services\NlaSvc\Parameters\Internet
-&gt; EnableActiveProbing</code> to <code>0</code> did not seem to have any effect on
Explorer&rsquo;s ability to find if the user is online or not.</li>
<li>Google Chrome on Windows uses the <a href="&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/ms741641(v=vs.85">Winsock API</a>.aspx&rdquo;) to detect if a network
is available. The relevant source code is
<a href="http://src.chromium.org/svn/trunk/src/net/base/network_change_notifier_win.cc">here</a>. Look
for the method <code>GetCurrentConnectionType()</code></li>
<li>Google Chrome on Linux uses a wrapper around NetworkManager&rsquo;s D-Bus
API. The code is
<a href="http://src.chromium.org/svn/trunk/src/net/base/network_change_notifier_linux.cc">here</a>.</li>
<li>Google Chrome on Mac tries to reach <code>0.0.0.0</code>. This can be seen
<a href="http://src.chromium.org/svn/trunk/src/net/base/network_change_notifier_mac.cc">here</a>. Look for the method <code>SetInitialConnectionType()</code>.</li>
</ul>

          </div>
        </div>
      </div>
    </article>

    <hr>

    
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          <li>
            <a href="https://twitter.com/sdqali">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="https://linkedin.com/in/sdqali">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="https://github.com/sdqali">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="/index.xml">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
        </ul>
        <p class="copyright text-muted">&copy; All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>


<script src="/js/jquery.js"></script>


<script src="/js/bootstrap.min.js"></script>


<script src="/js/clean-blog.min.js"></script>

  </body>
</html>
