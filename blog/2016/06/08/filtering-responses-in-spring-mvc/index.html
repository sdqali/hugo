<!DOCTYPE html5>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us" prefix="og: http://ogp.me/ns#">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Filtering responses in Spring MVC</title>

    
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    
    <link href="/css/clean-blog.min.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    
    <link href="/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='/css/fonts.css' rel='stylesheet' type='text/css'>

    
    
    

</head>

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@sdqali">
  <meta name="twitter:creator" content="@sdqali">
  <meta name="twitter:title" content="Filtering responses in Spring MVC">
  <meta name="twitter:description" content="Yesterday my colleague Imdad asked if there was a mechanism to add filtering to a Spring MVC end point that responded with JSON. We both started looking at it and this blog post explores a way to do it, albeit for a specific type of responses that was relevant to our discussions.">
  <meta name="twitter:image" content="http://sdqali.in/images/spring-by-pivotal.png">

  <meta property="og:title" content="Filtering responses in Spring MVC" />
  <meta property="og:description" content="Yesterday my colleague Imdad asked if there was a mechanism to add filtering to a Spring MVC end point that responded with JSON. We both started looking at it and this blog post explores a way to do it, albeit for a specific type of responses that was relevant to our discussions." itemprop="description"/>
  <meta property="og:url" content="http://sdqali.in/blog/2016/06/08/filtering-responses-in-spring-mvc/" />
  <meta property="og:image" content="http://sdqali.in/images/spring-by-pivotal.png" />
  <body>

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Sadique Ali</a>
    </div>

    
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/">Home</a> </li>
        <li><a href="/blog/">Blog</a> </li>
        <li><a href="/about">About</a> </li>
        <li><a href="/index.xml">Atom Feed</a> </li>
        <li><a href="https://github.com/sdqali">GitHub</a> </li>
        <li><a href="https://twitter.com/sdqali">Twitter</a> </li>
        <li><a href="https://www.linkedin.com/in/sdqali">LinkedIn</a> </li>
      </ul>
    </div>
    
  </div>
  
</nav>




    
    
    <header class="intro-header">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="site-heading">
              <h1> Filtering responses in Spring MVC</h1>
              <span class="meta">Wed, Jun 8, 2016</span>
            </div>
          </div>
        </div>
      </div>
    </header>


    
    <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <p>Yesterday my colleague <a href="https://twitter.com/imdhmd">Imdad</a> asked if there was a mechanism to add filtering to a Spring MVC end point that responded with JSON. We both started looking at it and this blog post explores a way to do it, albeit for a specific type of responses that was relevant to our discussions.</p>

<p>
For the purposes of this blog post, the response of the end point will be a collection of repositories, taken from the GitHub API for the end point <code>https://api.github.com/users/rails/repos</code>. This has the following structure.</p>
<div class="highlight" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>[
  {
    <span style="color: #330099; font-weight: bold">&quot;id&quot;</span>: <span style="color: #FF6600">20544</span>,
    <span style="color: #330099; font-weight: bold">&quot;name&quot;</span>: <span style="color: #CC3300">&quot;account_location&quot;</span>,
    <span style="color: #330099; font-weight: bold">&quot;full_name&quot;</span>: <span style="color: #CC3300">&quot;rails/account_location&quot;</span>,
    <span style="color: #330099; font-weight: bold">&quot;owner&quot;</span>: {
      <span style="color: #AA0000; background-color: #FFAAAA">...</span>
    },
    <span style="color: #AA0000; background-color: #FFAAAA">...</span>
    <span style="color: #330099; font-weight: bold">&quot;watchers_count&quot;</span>: <span style="color: #FF6600">70</span>,
    <span style="color: #330099; font-weight: bold">&quot;language&quot;</span>: <span style="color: #CC3300">&quot;Ruby&quot;</span>,
    <span style="color: #330099; font-weight: bold">&quot;has_issues&quot;</span>: <span style="color: #006699; font-weight: bold">false</span>,
    <span style="color: #330099; font-weight: bold">&quot;has_downloads&quot;</span>: <span style="color: #006699; font-weight: bold">true</span>,
    <span style="color: #330099; font-weight: bold">&quot;has_wiki&quot;</span>: <span style="color: #006699; font-weight: bold">false</span>,
    <span style="color: #330099; font-weight: bold">&quot;has_pages&quot;</span>: <span style="color: #006699; font-weight: bold">false</span>,
    <span style="color: #330099; font-weight: bold">&quot;forks_count&quot;</span>: <span style="color: #FF6600">12</span>,
    <span style="color: #330099; font-weight: bold">&quot;mirror_url&quot;</span>: <span style="color: #006699; font-weight: bold">null</span>,
    <span style="color: #330099; font-weight: bold">&quot;open_issues_count&quot;</span>: <span style="color: #FF6600">0</span>,
    <span style="color: #330099; font-weight: bold">&quot;forks&quot;</span>: <span style="color: #FF6600">12</span>,
    <span style="color: #330099; font-weight: bold">&quot;open_issues&quot;</span>: <span style="color: #FF6600">0</span>,
    <span style="color: #330099; font-weight: bold">&quot;watchers&quot;</span>: <span style="color: #FF6600">70</span>,
    <span style="color: #330099; font-weight: bold">&quot;default_branch&quot;</span>: <span style="color: #CC3300">&quot;master&quot;</span>
  }
  <span style="color: #AA0000; background-color: #FFAAAA">...</span>
  <span style="color: #AA0000; background-color: #FFAAAA">...</span>
]
</pre></div>

<p>We have a simple end point that reads a file with this response and responds with a JSON representation of it.</p>
<div class="highlight" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span><span style="color: #9999FF">@RestController</span>
<span style="color: #006699; font-weight: bold">public</span> <span style="color: #006699; font-weight: bold">class</span> <span style="color: #00AA88; font-weight: bold">ReposController</span> <span style="color: #555555">{</span>
    <span style="color: #9999FF">@RequestMapping</span><span style="color: #555555">(</span>path <span style="color: #555555">=</span> <span style="color: #CC3300">&quot;/repos&quot;</span><span style="color: #555555">,</span> method <span style="color: #555555">=</span> GET<span style="color: #555555">)</span>
    <span style="color: #006699; font-weight: bold">public</span> List <span style="color: #CC00FF">repos</span><span style="color: #555555">()</span> <span style="color: #006699; font-weight: bold">throws</span> URISyntaxException<span style="color: #555555">,</span> IOException <span style="color: #555555">{</span>
        URL url <span style="color: #555555">=</span> <span style="color: #006699; font-weight: bold">this</span><span style="color: #555555">.</span><span style="color: #330099">getClass</span><span style="color: #555555">().</span><span style="color: #330099">getClassLoader</span><span style="color: #555555">().</span><span style="color: #330099">getResource</span><span style="color: #555555">(</span><span style="color: #CC3300">&quot;repos.json&quot;</span><span style="color: #555555">).</span><span style="color: #330099">toURI</span><span style="color: #555555">().</span><span style="color: #330099">toURL</span><span style="color: #555555">();</span>

        ObjectMapper objectMapper <span style="color: #555555">=</span> <span style="color: #006699; font-weight: bold">new</span> ObjectMapper<span style="color: #555555">();</span>

        <span style="color: #006699; font-weight: bold">return</span> objectMapper<span style="color: #555555">.</span><span style="color: #330099">readValue</span><span style="color: #555555">(</span>url<span style="color: #555555">,</span> List<span style="color: #555555">.</span><span style="color: #330099">class</span><span style="color: #555555">);</span>
    <span style="color: #555555">}</span>
<span style="color: #555555">}</span>
</pre></div>

<p>What we want to do is to provide a convenient mechanism so that this end point can respond for request made with url parameters which it uses to filter repositories. For example, we expect the request to <code>http://localhost:8080/repos?fork=true&amp;language=Ruby</code> to have a JSON response with an array containing only those repositories that are forks and have Ruby as their primary language. Of course, it is worth pointing out that in actual system, you would want to do these kind of filtering at the data layer instead of the web layer, but this is an exercise to see how we could do it at the Spring layer.</p>

<p>We want our mechanism to be easy to use and I came with annotation that we would use as follows:</p>
<div class="highlight" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span><span style="color: #006699; font-weight: bold">public</span> <span style="color: #006699; font-weight: bold">class</span> <span style="color: #00AA88; font-weight: bold">ReposController</span> <span style="color: #555555">{</span>
    <span style="color: #9999FF">@RequestMapping</span><span style="color: #555555">(</span>path <span style="color: #555555">=</span> <span style="color: #CC3300">&quot;/repos&quot;</span><span style="color: #555555">,</span> method <span style="color: #555555">=</span> GET<span style="color: #555555">)</span>
    <span style="color: #9999FF">@JsonFilter</span><span style="color: #555555">(</span>keys <span style="color: #555555">=</span> <span style="color: #555555">{</span><span style="color: #CC3300">&quot;fork&quot;</span><span style="color: #555555">,</span> <span style="color: #CC3300">&quot;language&quot;</span><span style="color: #555555">})</span>
    <span style="color: #006699; font-weight: bold">public</span> List <span style="color: #CC00FF">repos</span><span style="color: #555555">()</span> <span style="color: #006699; font-weight: bold">throws</span> URISyntaxException<span style="color: #555555">,</span> IOException <span style="color: #555555">{</span>
      <span style="color: #0099FF; font-style: italic">// ...</span>
    <span style="color: #555555">}</span>
<span style="color: #555555">}</span>
</pre></div>

<p>The annotation itself takes the following form:</p>
<div class="highlight" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span><span style="color: #9999FF">@Target</span><span style="color: #555555">(</span>ElementType<span style="color: #555555">.</span><span style="color: #330099">METHOD</span><span style="color: #555555">)</span>
<span style="color: #9999FF">@Documented</span>
<span style="color: #9999FF">@Retention</span><span style="color: #555555">(</span>RetentionPolicy<span style="color: #555555">.</span><span style="color: #330099">RUNTIME</span><span style="color: #555555">)</span>
<span style="color: #006699; font-weight: bold">public</span> <span style="color: #9999FF">@interface</span> JsonFilter <span style="color: #555555">{</span>
    <span style="color: #0099FF; font-style: italic">// JSON keys that will be used for filtering</span>
    String<span style="color: #555555">[]</span> <span style="color: #CC00FF">keys</span><span style="color: #555555">()</span> <span style="color: #006699; font-weight: bold">default</span> <span style="color: #555555">{};</span>
<span style="color: #555555">}</span>
</pre></div>

<p>Spring MVC provides a <code>ResponseBodyAdvice</code> <sup class="footnote-ref" id="fnref:1"><a rel="footnote" href="#fn:1">1</a></sup> to customize the response immediately after the execution of a controller method, which is exactly what we want in this situation. The interface expects us to implement two methods.</p>
<div class="highlight" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span><span style="color: #9999FF">@ControllerAdvice</span>
<span style="color: #006699; font-weight: bold">public</span> <span style="color: #006699; font-weight: bold">class</span> <span style="color: #00AA88; font-weight: bold">JsonFilterAdvice</span> <span style="color: #006699; font-weight: bold">implements</span> ResponseBodyAdvice<span style="color: #555555">&lt;</span>List<span style="color: #555555">&gt;</span> <span style="color: #555555">{</span>
    <span style="color: #9999FF">@Override</span>
    <span style="color: #006699; font-weight: bold">public</span> <span style="color: #007788; font-weight: bold">boolean</span> <span style="color: #CC00FF">supports</span><span style="color: #555555">(</span>MethodParameter returnType<span style="color: #555555">,</span> Class<span style="color: #555555">&lt;?</span> <span style="color: #006699; font-weight: bold">extends</span> HttpMessageConverter<span style="color: #555555">&lt;?&gt;&gt;</span> converterType<span style="color: #555555">)</span> <span style="color: #555555">{</span>
        <span style="color: #006699; font-weight: bold">return</span> <span style="color: #006699; font-weight: bold">true</span><span style="color: #555555">;</span>
    <span style="color: #555555">}</span>

    <span style="color: #9999FF">@Override</span>
    <span style="color: #006699; font-weight: bold">public</span> List <span style="color: #CC00FF">beforeBodyWrite</span><span style="color: #555555">(</span>List body<span style="color: #555555">,</span> MethodParameter returnType<span style="color: #555555">,</span> MediaType selectedContentType<span style="color: #555555">,</span> Class<span style="color: #555555">&lt;?</span> <span style="color: #006699; font-weight: bold">extends</span>
    HttpMessageConverter<span style="color: #555555">&lt;?&gt;&gt;</span> selectedConverterType<span style="color: #555555">,</span> ServerHttpRequest request<span style="color: #555555">,</span> ServerHttpResponse response<span style="color: #555555">)</span> <span style="color: #555555">{</span>
        <span style="color: #006699; font-weight: bold">return</span> body<span style="color: #555555">;</span>
    <span style="color: #555555">}</span>
<span style="color: #555555">}</span>
</pre></div>

<p>For our case, we want the advice to modify response only if the controller method has the <code>@JsonFilter</code> annotation. This is possible with the following implementation of the <code>supports</code> method:</p>
<div class="highlight" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>    <span style="color: #9999FF">@Override</span>
    <span style="color: #006699; font-weight: bold">public</span> <span style="color: #007788; font-weight: bold">boolean</span> <span style="color: #CC00FF">supports</span><span style="color: #555555">(</span>MethodParameter returnType<span style="color: #555555">,</span> Class<span style="color: #555555">&lt;?</span> <span style="color: #006699; font-weight: bold">extends</span> HttpMessageConverter<span style="color: #555555">&lt;?&gt;&gt;</span> converterType<span style="color: #555555">)</span> <span style="color: #555555">{</span>
        List<span style="color: #555555">&lt;</span>Annotation<span style="color: #555555">&gt;</span> annotations <span style="color: #555555">=</span> Arrays<span style="color: #555555">.</span><span style="color: #330099">asList</span><span style="color: #555555">(</span>returnType<span style="color: #555555">.</span><span style="color: #330099">getMethodAnnotations</span><span style="color: #555555">());</span>
        <span style="color: #006699; font-weight: bold">return</span> annotations<span style="color: #555555">.</span><span style="color: #330099">stream</span><span style="color: #555555">().</span><span style="color: #330099">anyMatch</span><span style="color: #555555">(</span>annotation <span style="color: #555555">-&gt;</span> annotation<span style="color: #555555">.</span><span style="color: #330099">annotationType</span><span style="color: #555555">().</span><span style="color: #330099">equals</span><span style="color: #555555">(</span>JsonFilter<span style="color: #555555">.</span><span style="color: #330099">class</span><span style="color: #555555">));</span>
    <span style="color: #555555">}</span>
</pre></div>

<p>The actual filtering of the response itself involves filtering the <code>List</code> for only those entries where every filter key has values provided in the incoming request. The following implementation achieves this:</p>
<div class="highlight" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>    <span style="color: #9999FF">@Override</span>
    <span style="color: #006699; font-weight: bold">public</span> List <span style="color: #CC00FF">beforeBodyWrite</span><span style="color: #555555">(</span>List body<span style="color: #555555">,</span> MethodParameter returnType<span style="color: #555555">,</span> MediaType selectedContentType<span style="color: #555555">,</span> Class<span style="color: #555555">&lt;?</span> <span style="color: #006699; font-weight: bold">extends</span>
            HttpMessageConverter<span style="color: #555555">&lt;?&gt;&gt;</span> selectedConverterType<span style="color: #555555">,</span> ServerHttpRequest request<span style="color: #555555">,</span> ServerHttpResponse response<span style="color: #555555">)</span> <span style="color: #555555">{</span>
        List<span style="color: #555555">&lt;</span>Map<span style="color: #555555">&lt;</span>String<span style="color: #555555">,</span> Object<span style="color: #555555">&gt;&gt;</span> values <span style="color: #555555">=</span> <span style="color: #555555">(</span>List<span style="color: #555555">&lt;</span>Map<span style="color: #555555">&lt;</span>String<span style="color: #555555">,</span> Object<span style="color: #555555">&gt;&gt;)</span> body<span style="color: #555555">;</span>

        <span style="color: #0099FF; font-style: italic">// Identify keys we are interested in.</span>
        JsonFilter annotation <span style="color: #555555">=</span> returnType<span style="color: #555555">.</span><span style="color: #330099">getMethodAnnotation</span><span style="color: #555555">(</span>JsonFilter<span style="color: #555555">.</span><span style="color: #330099">class</span><span style="color: #555555">);</span>
        List<span style="color: #555555">&lt;</span>String<span style="color: #555555">&gt;</span> possibleFilters <span style="color: #555555">=</span> Arrays<span style="color: #555555">.</span><span style="color: #330099">asList</span><span style="color: #555555">(</span>annotation<span style="color: #555555">.</span><span style="color: #330099">keys</span><span style="color: #555555">());</span>

        HttpServletRequest servletRequest <span style="color: #555555">=</span> <span style="color: #555555">((</span>ServletServerHttpRequest<span style="color: #555555">)</span> request<span style="color: #555555">).</span><span style="color: #330099">getServletRequest</span><span style="color: #555555">();</span>

        List<span style="color: #555555">&lt;</span>Map<span style="color: #555555">&lt;</span>String<span style="color: #555555">,</span> Object<span style="color: #555555">&gt;&gt;</span> result <span style="color: #555555">=</span> values<span style="color: #555555">.</span><span style="color: #330099">stream</span><span style="color: #555555">().</span><span style="color: #330099">filter</span><span style="color: #555555">(</span>map <span style="color: #555555">-&gt;</span> <span style="color: #555555">{</span>
            <span style="color: #007788; font-weight: bold">boolean</span> match <span style="color: #555555">=</span> <span style="color: #006699; font-weight: bold">true</span><span style="color: #555555">;</span>
            Enumeration<span style="color: #555555">&lt;</span>String<span style="color: #555555">&gt;</span> parameterNames <span style="color: #555555">=</span> servletRequest<span style="color: #555555">.</span><span style="color: #330099">getParameterNames</span><span style="color: #555555">();</span>
            <span style="color: #006699; font-weight: bold">while</span> <span style="color: #555555">(</span>parameterNames<span style="color: #555555">.</span><span style="color: #330099">hasMoreElements</span><span style="color: #555555">())</span> <span style="color: #555555">{</span>
                String parameterName <span style="color: #555555">=</span> parameterNames<span style="color: #555555">.</span><span style="color: #330099">nextElement</span><span style="color: #555555">();</span>
                <span style="color: #006699; font-weight: bold">if</span><span style="color: #555555">(</span>possibleFilters<span style="color: #555555">.</span><span style="color: #330099">contains</span><span style="color: #555555">(</span>parameterName<span style="color: #555555">))</span> <span style="color: #555555">{</span>
                    String parameterValue <span style="color: #555555">=</span> servletRequest<span style="color: #555555">.</span><span style="color: #330099">getParameter</span><span style="color: #555555">(</span>parameterName<span style="color: #555555">);</span>
                    Object valueFromMap <span style="color: #555555">=</span> map<span style="color: #555555">.</span><span style="color: #330099">get</span><span style="color: #555555">(</span>parameterName<span style="color: #555555">);</span>
                    match <span style="color: #555555">=</span> <span style="color: #555555">(</span>valueFromMap <span style="color: #555555">!=</span> <span style="color: #006699; font-weight: bold">null</span><span style="color: #555555">)</span> <span style="color: #555555">&amp;&amp;</span> valueFromMap<span style="color: #555555">.</span><span style="color: #330099">toString</span><span style="color: #555555">().</span><span style="color: #330099">equals</span><span style="color: #555555">(</span>parameterValue<span style="color: #555555">.</span><span style="color: #330099">toString</span><span style="color: #555555">());</span>
                <span style="color: #555555">}</span>
            <span style="color: #555555">}</span>
            <span style="color: #006699; font-weight: bold">return</span> match<span style="color: #555555">;</span>
        <span style="color: #555555">}).</span><span style="color: #330099">collect</span><span style="color: #555555">(</span>Collectors<span style="color: #555555">.</span><span style="color: #330099">toList</span><span style="color: #555555">());</span>
        <span style="color: #006699; font-weight: bold">return</span> result<span style="color: #555555">;</span>
    <span style="color: #555555">}</span>
</pre></div>

<p>For every entry in the list, we compare query parameter values in the request&rsquo;s URL to the one in the map and filter out only those entries where every combination matches. This is probably not the most efficient way of doing it, but for a quick hack, I am okay with it. Please feel free to take this and improve it. The code for this example is available on <a href="https://github.com/sdqali/spring-json-filter">GitHub</a>.</p>

<p>PS: Imdad may or may not have asked me to credit him for this blog post. ;-)</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1"><code>ResponseBodyAdvice</code> is an interface that can be wired with a <code>@ControllerAdvice</code> annotation to customize the response of controller methods. See the documentation <a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyAdvice.html">here</a>.
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>
            <p class="comments">
  If you have questions or comments about this blog post, you can get in touch with me on Twitter <a href="https://twitter.com/sdqali">@sdqali</a>.
</p>

          </div>
        </div>
      </div>
    </article>

    <hr>

    
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          <li>
            <a href="https://twitter.com/sdqali">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="https://linkedin.com/in/sdqali">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="https://github.com/sdqali">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="/index.xml">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
        </ul>
        <p class="copyright text-muted">&copy; All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>


<script src="/js/jquery.js"></script>


<script src="/js/bootstrap.min.js"></script>


<script src="/js/clean-blog.min.js"></script>

<script src="/js/keen.min.3.3.0.js" type="text/javascript"></script>
<script src="/js/parseuri.js" type="text/javascript"></script>
<script src="/js/ua-parser.min.js" type="text/javascript
"></script>
 <script src="/js/Math.uuid.js" type="text/javascript"></script>
<script src="/js/analytics.js" type="text/javascript"></script>


  </body>
</html>
