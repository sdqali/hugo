<!DOCTYPE html5>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us" prefix="og: http://ogp.me/ns#">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Programming, Software Development, Java Development, Coding" name="keywords">
    <meta name="author" content="Sadique Ali">

    
    
      
    
    

    <title>Setting up a secure etcd cluster behind a proxy - {code that works} by Sadique Ali</title>

    
    
    

</head>

  <meta name="description" content="This is a blog post that explains how to set up a highly available etcd cluster behind a proxy and securing the communication between a client and the proxy, between the proxy and the individual member in the cluster and between members in the cluster." />
  
    <meta content="etcd, cluster, coreos, configuration, proxy, secure, development" name="keywords">
  

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@sdqali">
  <meta name="twitter:creator" content="@sdqali">
  <meta name="twitter:title" content="Setting up a secure etcd cluster behind a proxy">
  <meta name="twitter:description" content="This is a blog post that explains how to set up a highly available etcd cluster behind a proxy and securing the communication between a client and the proxy, between the proxy and the individual member in the cluster and between members in the cluster.">
  <meta name="twitter:image" content="https://sdqali.in/images/etcd2-0.png">

  <meta property="og:title" content="Setting up a secure etcd cluster behind a proxy" />
  <meta property="og:description" content="This is a blog post that explains how to set up a highly available etcd cluster behind a proxy and securing the communication between a client and the proxy, between the proxy and the individual member in the cluster and between members in the cluster." itemprop="description"/>
  <meta property="og:url" content="https://sdqali.in/blog/2016/11/11/setting-up-a-secure-etcd-cluster-behind-a-proxy/" />
  <meta property="og:image" content="https://sdqali.in/images/etcd2-0.png" />
  <body>

    <nav itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
  <ul >
    <li aria-hidden="true"><a href="/">Home</a> </li>
    <li><a href="/blog/">Blog</a> </li>
    <li><a href="/about">About</a> </li>
    <li><a href="/index.xml">Atom Feed</a> </li>
    <li><a href="https://github.com/sdqali">GitHub</a> </li>
    <li><a href="https://twitter.com/sdqali">Twitter</a> </li>
    <li><a href="https://www.linkedin.com/in/sdqali">LinkedIn</a> </li>
  </ul>
</nav>




		
		
		<header itemscope="itemscope" itemtype="http://schema.org/WPHeader">
				<div >
					<h1> Setting up a secure etcd cluster behind a proxy</h1>
					<span >Fri, Nov 11, 2016</span>
					<div class="tag-list">
						<span  aria-hidden="true"></span>
						
						
							<a class="tag" href="/tags/etcd">etcd</a>
					  
						
						
							<a class="tag" href="/tags/cluster">cluster</a>
					  
						
						
							<a class="tag" href="/tags/coreos">coreos</a>
					  
						
						
							<a class="tag" href="/tags/configuration">configuration</a>
					  
						
						
							<a class="tag" href="/tags/proxy">proxy</a>
					  
						
						
							<a class="tag" href="/tags/secure">secure</a>
					  
						
						
						
					</div>
				</div>
    </header>


    
    <article>
      <div itemprop="mainContentOfPage"
           itemscope="itemscope" itemtype="http://schema.org/WebPageElement">
        <div>
          <p>This is a blog post that explains how to set up a highly available etcd cluster behind a proxy and securing the communication between a client and the proxy, between the proxy and the individual member in the cluster and between members in the cluster.</p>

<p>CoreOS&rsquo;s etcd is</p>

<blockquote>
<p>&hellip; a distributed key value store that provides a reliable way to store data across a cluster of machines. Itâ€™s open-source and available on GitHub. etcd gracefully handles leader elections during network partitions and will tolerate machine failure, including the leader.</p>
</blockquote>

<p>It&rsquo;s highly available distributed nature makes it a great choice for storing application configuration. Kubernetes, for example uses etcd to store all it&rsquo;s API objects.</p>

<p>The proxy mode in etcd allows etcd to run as a transparent proxy for a cluster. This makes it possible to expose only the proxy to the clients and abstract away discovery and leader election away from the client. The client needs to know only about the proxy.</p>

<p>Communications to an etcd cluster and between members in a cluster can be secured through a PKI setup. Since an etcd proxy is in effect an etcd node that does not participate in leader election, communication between a client and a proxy can also be secured with similar infrastructure.</p>

<p>In this example, we will set up a cluster of 3 etcd nodes. We will use a key pair for the nodes and proxy to communicate between each other and another key pair for clients to communicate with the proxy.</p>

<p><img src="/images/etcd-secure-cluster-proxy.svg" alt="Diagram of a Secure Etcd Cluster with Proxy" title="Secure Etcd Cluster with Proxy" /></p>

<h2 id="generating-keys">Generating Keys</h2>

<p>This section borrows heavily from Kelsey Hightower&rsquo;s <a href="https://github.com/kelseyhightower/kubernetes-the-hard-way">Kubernetes the Hard Way tutorial</a>. For the purposes of this blog post, we are going to assume that we will be running the three nodes and the proxy on a local machine. There will be changes that need to be made to the key configurations if these are deployed elsewhere. The instructions also assume that you are on OS X. Please make the necessary adjustments if you are on Linux.</p>

<h3 id="install-cloudflare-pki-toolkit">Install CloudFlare PKI toolkit</h3>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#09f;font-style:italic"># Install the csffl utility</span>
wget https://pkg.cfssl.org/R1.2/cfssl_darwin-amd64
chmod +x cfssl_darwin-amd64
sudo mv cfssl_darwin-amd64 /usr/local/bin/cfssl

<span style="color:#09f;font-style:italic"># Install cfssljson utility</span>
wget https://pkg.cfssl.org/R1.2/cfssljson_darwin-amd64
chmod +x cfssljson_darwin-amd64
sudo mv cfssljson_darwin-amd64 /usr/local/bin/cfssljson</code></pre></div>
<h3 id="create-ca-key-and-certificate">Create CA key and certificate</h3>

<p>The first step will be to create a Certificate Authority configuration.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">echo</span> <span style="color:#c30">&#39;{
</span><span style="color:#c30">  &#34;signing&#34;: {
</span><span style="color:#c30">    &#34;default&#34;: {
</span><span style="color:#c30">      &#34;expiry&#34;: &#34;8760h&#34;
</span><span style="color:#c30">    },
</span><span style="color:#c30">    &#34;profiles&#34;: {
</span><span style="color:#c30">      &#34;etcd-node&#34;: {
</span><span style="color:#c30">        &#34;usages&#34;: [&#34;signing&#34;, &#34;key encipherment&#34;, &#34;server auth&#34;, &#34;client auth&#34;],
</span><span style="color:#c30">        &#34;expiry&#34;: &#34;8760h&#34;
</span><span style="color:#c30">      },
</span><span style="color:#c30">      &#34;etcd-proxy&#34;: {
</span><span style="color:#c30">        &#34;usages&#34;: [&#34;signing&#34;, &#34;key encipherment&#34;, &#34;server auth&#34;, &#34;client auth&#34;],
</span><span style="color:#c30">        &#34;expiry&#34;: &#34;8760h&#34;
</span><span style="color:#c30">      }
</span><span style="color:#c30">    }
</span><span style="color:#c30">  }
</span><span style="color:#c30">}&#39;</span> &gt; ca-config.json</code></pre></div>
<p>Here we are specifying two different profiles - one for the node key and one for the proxy key. We will then create a configuration for certificate signing request (CSR) for the CA key and certificate.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">echo</span> <span style="color:#c30">&#39;{
</span><span style="color:#c30">  &#34;CN&#34;: &#34;Etcd&#34;,
</span><span style="color:#c30">  &#34;key&#34;: {
</span><span style="color:#c30">    &#34;algo&#34;: &#34;rsa&#34;,
</span><span style="color:#c30">    &#34;size&#34;: 2048
</span><span style="color:#c30">  },
</span><span style="color:#c30">  &#34;names&#34;: [
</span><span style="color:#c30">    {
</span><span style="color:#c30">      &#34;C&#34;: &#34;US&#34;,
</span><span style="color:#c30">      &#34;L&#34;: &#34;San Francisco&#34;,
</span><span style="color:#c30">      &#34;O&#34;: &#34;Infra&#34;,
</span><span style="color:#c30">      &#34;OU&#34;: &#34;CA&#34;,
</span><span style="color:#c30">      &#34;ST&#34;: &#34;California&#34;
</span><span style="color:#c30">    }
</span><span style="color:#c30">  ]
</span><span style="color:#c30">}&#39;</span> &gt; ca-csr.json</code></pre></div>
<p>Finally, we will generate the certificate and key.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cfssl gencert -initca ca-csr.json | cfssljson -bare ca</code></pre></div>
<p>This will generate the three files: <code>ca-key.pem</code> - private key for the CA, <code>ca.pem</code> - certificate for the CA and <code>ca.csr</code> - certificate signing request for the CA.</p>

<h3 id="create-node-certificate-and-key">Create Node certificate and key</h3>

<p>Once we have the CA certificate and key in place, we can generate the TLS key for securing the communications between nodes and proxy. We will start by creating a configuration for this certificate. Since we are running everything locally, the hosts allowed to authenticate with this certificate include only <code>localhost</code>.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">echo</span> <span style="color:#c30">&#39;{
</span><span style="color:#c30">  &#34;CN&#34;: &#34;etcd-node&#34;,
</span><span style="color:#c30">  &#34;hosts&#34;: [
</span><span style="color:#c30">    &#34;localhost&#34;,
</span><span style="color:#c30">    &#34;0.0.0.0&#34;,
</span><span style="color:#c30">    &#34;127.0.0.1&#34;
</span><span style="color:#c30">  ],
</span><span style="color:#c30">  &#34;key&#34;: {
</span><span style="color:#c30">    &#34;algo&#34;: &#34;rsa&#34;,
</span><span style="color:#c30">    &#34;size&#34;: 2048
</span><span style="color:#c30">  },
</span><span style="color:#c30">  &#34;names&#34;: [
</span><span style="color:#c30">    {
</span><span style="color:#c30">      &#34;C&#34;: &#34;US&#34;,
</span><span style="color:#c30">      &#34;L&#34;: &#34;San Francisco&#34;,
</span><span style="color:#c30">      &#34;O&#34;: &#34;Infra&#34;,
</span><span style="color:#c30">      &#34;OU&#34;: &#34;Cluster&#34;,
</span><span style="color:#c30">      &#34;ST&#34;: &#34;California&#34;
</span><span style="color:#c30">    }
</span><span style="color:#c30">  ]
</span><span style="color:#c30">}&#39;</span> &gt; etcd-node-csr.json</code></pre></div>
<p>Now we can generate the node certificate and key</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cfssl gencert <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -ca<span style="color:#555">=</span>ca.pem <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -ca-key<span style="color:#555">=</span>ca-key.pem <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -config<span style="color:#555">=</span>ca-config.json <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -profile<span style="color:#555">=</span>etcd-node <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  etcd-node-csr.json | cfssljson -bare etcd-node</code></pre></div>
<p>This will create three files: <code>etcd-node.pem</code>- the node certificate, <code>etcd-node-key.pem</code> the key for this certificate and <code>etcd-node.csr</code> - the certificate signing request.</p>

<h3 id="create-proxy-certificate-and-key">Create Proxy certificate and key</h3>

<p>We can now generate the TLS key for securing the communications between the client and the proxy. We will start by creating a configuration for this certificate. Since our client and proxy are running locally, the hosts allowed to authenticate with this certificate include only <code>localhost</code>.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">echo</span> <span style="color:#c30">&#39;{
</span><span style="color:#c30">  &#34;CN&#34;: &#34;etcd-proxy&#34;,
</span><span style="color:#c30">  &#34;hosts&#34;: [
</span><span style="color:#c30">    &#34;localhost&#34;,
</span><span style="color:#c30">    &#34;0.0.0.0&#34;,
</span><span style="color:#c30">    &#34;127.0.0.1&#34;
</span><span style="color:#c30">  ],
</span><span style="color:#c30">  &#34;key&#34;: {
</span><span style="color:#c30">    &#34;algo&#34;: &#34;rsa&#34;,
</span><span style="color:#c30">    &#34;size&#34;: 2048
</span><span style="color:#c30">  },
</span><span style="color:#c30">  &#34;names&#34;: [
</span><span style="color:#c30">    {
</span><span style="color:#c30">      &#34;C&#34;: &#34;US&#34;,
</span><span style="color:#c30">      &#34;L&#34;: &#34;San Francisco&#34;,
</span><span style="color:#c30">      &#34;O&#34;: &#34;Infra&#34;,
</span><span style="color:#c30">      &#34;OU&#34;: &#34;Cluster&#34;,
</span><span style="color:#c30">      &#34;ST&#34;: &#34;California&#34;
</span><span style="color:#c30">    }
</span><span style="color:#c30">  ]
</span><span style="color:#c30">}&#39;</span> &gt; etcd-proxy-csr.json</code></pre></div>
<p>Now we can generate the proxy certificate and key</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cfssl gencert <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -ca<span style="color:#555">=</span>ca.pem <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -ca-key<span style="color:#555">=</span>ca-key.pem <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -config<span style="color:#555">=</span>ca-config.json <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  -profile<span style="color:#555">=</span>etcd-proxy <span style="color:#c30;font-weight:bold">\
</span><span style="color:#c30;font-weight:bold"></span>  etcd-proxy-csr.json | cfssljson -bare etcd-proxy</code></pre></div>
<p>This will create three files: <code>etcd-proxy.pem</code>- the proxy certificate, <code>etcd-proxy-key.pem</code> the key for this certificate and <code>etcd-proxy.csr</code> - the certificate signing request.</p>

<h2 id="running-the-nodes-securely">Running the nodes securely</h2>

<p>Now that we have the certificates and keys, we will start the three nodes that form our etcd cluster. We will create three shell scripts that does this for us. In each of these, we will pass the appropriate parameters to etcd so that it uses the node certificate and key.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#09f;font-style:italic">#script for node1</span>
<span style="color:#366">echo</span> <span style="color:#c30">&#39;#!/usr/bin/env sh
</span><span style="color:#c30">
</span><span style="color:#c30">etcd \
</span><span style="color:#c30">--name=&#39;</span>node1<span style="color:#c30">&#39; \
</span><span style="color:#c30">--listen-client-urls=&#39;</span>https://localhost:1179<span style="color:#c30">&#39; \
</span><span style="color:#c30">--advertise-client-urls=&#39;</span>https://localhost:1179<span style="color:#c30">&#39; \
</span><span style="color:#c30">--listen-peer-urls=&#39;</span>https://localhost:1180<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-advertise-peer-urls=&#39;</span>https://localhost:1180<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster=&#39;</span><span style="color:#033">node1</span><span style="color:#555">=</span>https://localhost:1180,node2<span style="color:#555">=</span>https://localhost:1280,node3<span style="color:#555">=</span>https://localhost:1380<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster-token=&#39;</span>etcd-cluster-token<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster-state=&#39;</span>new<span style="color:#c30">&#39; \
</span><span style="color:#c30">--cert-file=./etcd-node.pem \
</span><span style="color:#c30">--key-file=./etcd-node-key.pem \
</span><span style="color:#c30">--peer-cert-file=./etcd-node.pem \
</span><span style="color:#c30">--peer-key-file=./etcd-node-key.pem \
</span><span style="color:#c30">--trusted-ca-file=./ca.pem \
</span><span style="color:#c30">--peer-trusted-ca-file=./ca.pem \
</span><span style="color:#c30">--data-dir=./nodes/node1 \
</span><span style="color:#c30">--peer-client-cert-auth=&#39;</span>true<span style="color:#c30">&#39;
</span><span style="color:#c30">&#39;</span> &gt; start-node1.sh

<span style="color:#09f;font-style:italic"># script for node2</span>
<span style="color:#366">echo</span> <span style="color:#c30">&#39;#!/usr/bin/env sh
</span><span style="color:#c30">
</span><span style="color:#c30">etcd \
</span><span style="color:#c30">--name=&#39;</span>node2<span style="color:#c30">&#39; \
</span><span style="color:#c30">--listen-client-urls=&#39;</span>https://localhost:1279<span style="color:#c30">&#39; \
</span><span style="color:#c30">--advertise-client-urls=&#39;</span>https://localhost:1279<span style="color:#c30">&#39; \
</span><span style="color:#c30">--listen-peer-urls=&#39;</span>https://localhost:1280<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-advertise-peer-urls=&#39;</span>https://localhost:1280<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster=&#39;</span><span style="color:#033">node1</span><span style="color:#555">=</span>https://localhost:1180,node2<span style="color:#555">=</span>https://localhost:1280,node3<span style="color:#555">=</span>https://localhost:1380<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster-token=&#39;</span>etcd-cluster-token<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster-state=&#39;</span>new<span style="color:#c30">&#39; \
</span><span style="color:#c30">--cert-file=./etcd-node.pem \
</span><span style="color:#c30">--key-file=./etcd-node-key.pem \
</span><span style="color:#c30">--peer-cert-file=./etcd-node.pem \
</span><span style="color:#c30">--peer-key-file=./etcd-node-key.pem \
</span><span style="color:#c30">--trusted-ca-file=./ca.pem \
</span><span style="color:#c30">--peer-trusted-ca-file=./ca.pem \
</span><span style="color:#c30">--data-dir=./nodes/node2 \
</span><span style="color:#c30">--peer-client-cert-auth=&#39;</span>true<span style="color:#c30">&#39;
</span><span style="color:#c30">&#39;</span> &gt; start-node2.sh

<span style="color:#09f;font-style:italic">#script for node3</span>
<span style="color:#366">echo</span> <span style="color:#c30">&#39;#!/usr/bin/env sh
</span><span style="color:#c30">
</span><span style="color:#c30">etcd \
</span><span style="color:#c30">--name=&#39;</span>node3<span style="color:#c30">&#39; \
</span><span style="color:#c30">--listen-client-urls=&#39;</span>https://localhost:1379<span style="color:#c30">&#39; \
</span><span style="color:#c30">--advertise-client-urls=&#39;</span>https://localhost:1379<span style="color:#c30">&#39; \
</span><span style="color:#c30">--listen-peer-urls=&#39;</span>https://localhost:1380<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-advertise-peer-urls=&#39;</span>https://localhost:1380<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster=&#39;</span><span style="color:#033">node1</span><span style="color:#555">=</span>https://localhost:1180,node2<span style="color:#555">=</span>https://localhost:1280,node3<span style="color:#555">=</span>https://localhost:1380<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster-token=&#39;</span>etcd-cluster-token<span style="color:#c30">&#39; \
</span><span style="color:#c30">--initial-cluster-state=&#39;</span>new<span style="color:#c30">&#39; \
</span><span style="color:#c30">--cert-file=./etcd-node.pem \
</span><span style="color:#c30">--key-file=./etcd-node-key.pem \
</span><span style="color:#c30">--peer-cert-file=./etcd-node.pem \
</span><span style="color:#c30">--peer-key-file=./etcd-node-key.pem \
</span><span style="color:#c30">--trusted-ca-file=./ca.pem \
</span><span style="color:#c30">--peer-trusted-ca-file=./ca.pem \
</span><span style="color:#c30">--data-dir=./nodes/node3 \
</span><span style="color:#c30">--peer-client-cert-auth=&#39;</span>true<span style="color:#c30">&#39;
</span><span style="color:#c30">&#39;</span> &gt; start-node3.sh

chmod +x ./start-node1.sh ./start-node2.sh ./start-node3.sh</code></pre></div>
<p>Once these scripts are executed, we have an etcd cluster of three nodes. We can test that this cluster is started correctly with the right security using <code>etcdctl</code> client. For this purpose, we will be using the node certificate and key temporarily. We will also be assuming that we know what the individual nodes are. It is important to note that in our final configuration, the client will not have access to this certificate and key. It will have access only to the proxy key and there is no guarantee that the client knows what the individual nodes are.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ etcdctl --cert-file<span style="color:#555">=</span>./etcd-node.pem  --key-file<span style="color:#555">=</span>./etcd-node-key.pem --ca-file<span style="color:#555">=</span>./ca.pem --endpoints<span style="color:#555">=</span>https://0.0.0.0:1179,https://0.0.0.0:1279,https://0.0.0.0:1379 cluster-health
member 5a68dbeefb870ed1 is healthy: got healthy result from https://localhost:1179
member 772c76fe731a3914 is healthy: got healthy result from https://localhost:1379
member aa3bff8d4d84db66 is healthy: got healthy result from https://localhost:1279
cluster is healthy</code></pre></div>
<h2 id="configuring-the-secure-proxy">Configuring the secure proxy</h2>

<p>Once we have the cluster running, we can run the proxy. To secure it, we will tell etcd to use the etcd-node key for communicating with the nodes and to use the etcd-proxy certificate to accept connection from clients.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">echo</span> <span style="color:#c30">&#39;#!/usr/bin/env sh
</span><span style="color:#c30">
</span><span style="color:#c30">etcd \
</span><span style="color:#c30">    --name=&#39;</span>proxy<span style="color:#c30">&#39; \
</span><span style="color:#c30">     --proxy=on \
</span><span style="color:#c30">     --listen-client-urls https://localhost:2379 \
</span><span style="color:#c30">     --initial-cluster &#39;</span><span style="color:#033">node1</span><span style="color:#555">=</span>https://localhost:1180,node2<span style="color:#555">=</span>https://localhost:1280,node3<span style="color:#555">=</span>https://localhost:1380<span style="color:#c30">&#39; \
</span><span style="color:#c30">     --peer-cert-file=./etcd-node.pem \
</span><span style="color:#c30">     --peer-key-file=./etcd-node-key.pem \
</span><span style="color:#c30">     --peer-trusted-ca-file=./ca.pem \
</span><span style="color:#c30">     --peer-client-cert-auth=&#39;</span>true<span style="color:#c30">&#39; \
</span><span style="color:#c30">     --ca-file=./ca.pem \
</span><span style="color:#c30">     --cert-file=./etcd-proxy.pem \
</span><span style="color:#c30">     --key-file=./etcd-proxy-key.pem \
</span><span style="color:#c30">     --data-dir=./nodes/proxy
</span><span style="color:#c30">&#39;</span> &gt; start-proxy.sh

chmod +x start-proxy.sh</code></pre></div>
<p>Once we have the proxy running with these parameters, we can test that the cluster and the proxy is configured correctly. This time, we will be using only the proxy certificate and the proxy end point.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ etcdctl --cert-file<span style="color:#555">=</span>./etcd-proxy.pem  --key-file<span style="color:#555">=</span>./etcd-proxy-key.pem --ca-file<span style="color:#555">=</span>./ca.pem --endpoints<span style="color:#555">=</span>https://0.0.0.0:2379 cluster-health
member 5a68dbeefb870ed1 is healthy: got healthy result from https://localhost:1179
member 772c76fe731a3914 is healthy: got healthy result from https://localhost:1379
member aa3bff8d4d84db66 is healthy: got healthy result from https://localhost:1279
cluster is healthy</code></pre></div>
<p>This set up gives us a secure etcd cluster with a secure proxy in front of it. Communications between client and proxy, proxy and nodes and among nodes are all secured.</p>
        </div>
        <aside>
          <p class="comments">
  If you have questions or comments about this blog post, you can get in touch with me on Twitter <a href="https://twitter.com/sdqali">@sdqali</a>.
</p>

        </aside>
        <aside>
          <h3>If you liked this post, you'll also like...</h3>
          <ul class="related-posts">
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2019/03/23/understanding-trailing-processing-in-sas-input/?utm_source=site&amp;utm_medium=related">Understanding trailing @ processing in SAS input</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2019/03/23/importing-the-sasuser-datasets-in-sas-studio/?utm_source=site&amp;utm_medium=related">Importing the SASUSER datasets in SAS Studio</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/11/29/implementing-feature-toggles-for-a-spring-boot-application-part-4/?utm_source=site&amp;utm_medium=related">Implementing feature toggles for a Spring Boot application - Part 4</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/11/28/implementing-feature-toggles-for-a-spring-boot-application-part-3/?utm_source=site&amp;utm_medium=related">Implementing feature toggles for a Spring Boot application - Part 3</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/11/26/implementing-feature-toggles-for-a-spring-boot-application-part-2/?utm_source=site&amp;utm_medium=related">Implementing feature toggles for a Spring Boot application - Part 2</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/11/21/implementing-feature-toggles-for-a-spring-boot-application-part-1/?utm_source=site&amp;utm_medium=related">Implementing feature toggles for a Spring Boot application - Part 1</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/11/02/handling-deserialization-errors-in-spring-redis-sessions/?utm_source=site&amp;utm_medium=related">Handling Deserialization errors in Spring Redis Sessions</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/07/20/csrf-protection-with-spring-security-and-angular-js/?utm_source=site&amp;utm_medium=related">CSRF Protection with Spring Security and Angular JS</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/07/16/controlling-redis-auto-configuration-for-spring-boot-session/?utm_source=site&amp;utm_medium=related">Controlling Redis auto-configuration for Spring Boot Session</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/07/13/jwt-authentication-with-spring-web-part-5/?utm_source=site&amp;utm_medium=related">JWT authentication with Spring Web - Part 5</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/07/07/jwt-authentication-with-spring-web-part-4/?utm_source=site&amp;utm_medium=related">JWT authentication with Spring Web - Part 4</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/07/05/jwt-authentication-with-spring-web-part-3/?utm_source=site&amp;utm_medium=related">JWT authentication with Spring Web - Part 3</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/07/03/jwt-authentication-with-spring-web-part-2/?utm_source=site&amp;utm_medium=related">JWT authentication with Spring Web - Part 2</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/07/02/jwt-authentication-with-spring-web-part-1/?utm_source=site&amp;utm_medium=related">JWT authentication with Spring Web - Part 1</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/06/30/json-logging-for-spring-applications/?utm_source=site&amp;utm_medium=related">JSON logging for Spring applications</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/06/28/injecting-dependencies-into-a-spring-configuration/?utm_source=site&amp;utm_medium=related">Injecting dependencies into a Spring @Configuration</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/06/08/filtering-responses-in-spring-mvc/?utm_source=site&amp;utm_medium=related">Filtering responses in Spring MVC</a></li>
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/04/24/deprecating-domain-events-in-axon/?utm_source=site&amp;utm_medium=related">Deprecating domain events in Axon</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/04/19/programmable-exit-codes-for-spring-command-line-applications-2/?utm_source=site&amp;utm_medium=related">Programmable exit codes for spring command line applications - 2</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/04/17/programmable-exit-codes-for-spring-command-line-applications/?utm_source=site&amp;utm_medium=related">Programmable exit codes for Spring command line applications</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2016/01/29/using-custom-arguments-in-spring-mvc-controllers/?utm_source=site&amp;utm_medium=related">Using custom arguments in Spring MVC controllers</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/12/16/authentication-for-apache-camel-http-components/?utm_source=site&amp;utm_medium=related">Authentication for Apache Camel HTTP components</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/12/14/thoughts-on-open-graph-tags/?utm_source=site&amp;utm_medium=related">Thoughts on Open Graph tags</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/12/11/integration-testing-spring-command-line-applications/?utm_source=site&amp;utm_medium=related">Integration testing Spring command line applications</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/12/10/integration-testing-challenges-for-non-web-spring-applications/?utm_source=site&amp;utm_medium=related">Integration testing challenges for non-web Spring applications</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/12/07/how-thinking-of-documentation-as-legislation-helped-me-become-a-better-programmer/?utm_source=site&amp;utm_medium=related">How thinking of Documentation as Legislation helped me become a better programmer</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/12/06/implementing-custom-annotations-for-spring-mvc/?utm_source=site&amp;utm_medium=related">Implementing custom annotations for Spring MVC</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/12/04/validating-requestparams-and-pathvariables-in-spring-mvc/?utm_source=site&amp;utm_medium=related">Validating RequestParams and PathVariables in Spring MVC</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/11/24/testing-async-responses-using-mockmvc/?utm_source=site&amp;utm_medium=related">Testing async responses using MockMvc</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/06/09/running-multiple-applications-in-the-same-tomcat-installation/?utm_source=site&amp;utm_medium=related">Running multiple applications in the same Tomcat installation</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/05/21/making-sense-of-cloud-foundry-security-group-declarations/?utm_source=site&amp;utm_medium=related">Making sense of Cloud Foundry security group declarations</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2015/05/20/configuring-cloud-foundry-java-memory-parameters/?utm_source=site&amp;utm_medium=related">Configuring Cloud Foundry Java Memory Parameters</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2014/03/20/clojure-dojo-levenshtein-edit-distance/?utm_source=site&amp;utm_medium=related">Clojure Dojo - Levenshtein edit distance</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2014/02/17/a-simple-jmeter-test-with-login/?utm_source=site&amp;utm_medium=related">A simple JMeter test with login</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/10/13/implementing-rate-limiting-in-rails-part-2/?utm_source=site&amp;utm_medium=related">Implementing Rate Limiting in Rails - Part 2</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/10/12/implementing-rate-limiting-in-rails-part-1/?utm_source=site&amp;utm_medium=related">Implementing Rate Limiting in Rails - Part 1</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/10/07/python-hack-dynamically-override-an-objects-attribute/?utm_source=site&amp;utm_medium=related">Python Hack - Dynamically override an object&#39;s attribute</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/09/12/managing-gemsets-in-rbenv/?utm_source=site&amp;utm_medium=related">Managing Gemsets in Rbenv</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/09/08/looking-up-compiler-params-used-to-compile-a-ruby-version/?utm_source=site&amp;utm_medium=related">Looking up Compiler params used to compile a Ruby version</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/08/15/pythons-bool-type/?utm_source=site&amp;utm_medium=related">Python&#39;s bool type</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/07/31/validating-json-in-emacs/?utm_source=site&amp;utm_medium=related">Validating JSON in Emacs</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/04/29/emacs-hack-viewing-git-logs-while-composing-commit-messages/?utm_source=site&amp;utm_medium=related">Emacs hack: Viewing Git logs while composing commit messages</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/04/14/configure-gits-comment-character/?utm_source=site&amp;utm_medium=related">Configure Git&#39;s comment character</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/04/11/my-experience-working-remotely/?utm_source=site&amp;utm_medium=related">My experience working remotely</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/04/08/oh-i-can-build-it-in.../?utm_source=site&amp;utm_medium=related">Oh I can build it in...</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/04/05/javascript-clipboard-access-and-hidden-flash-widgets/?utm_source=site&amp;utm_medium=related">JavaScript, clipboard access and hidden flash widgets</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2013/01/22/reducing-emacs-startup-time-while-committing/?utm_source=site&amp;utm_medium=related">Reducing Emacs startup time while committing</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/11/29/my-first-firefox-plugin-getcache-view-cached-version-of-the-current-page/?utm_source=site&amp;utm_medium=related">My first Firefox plugin: GetCache - View cached version of the current page</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/11/28/getcache-a-chrome-plugin-to-view-cached-version-of-the-current-page/?utm_source=site&amp;utm_medium=related">GetCache - A Chrome plugin to view cached version of the current page</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/11/27/on-rest-content-type-google-chrome-and-caching/?utm_source=site&amp;utm_medium=related">On REST, Content-Type, Google Chrome and Caching</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/07/09/understanding-pythons-with-statement/?utm_source=site&amp;utm_medium=related">Understanding Python&#39;s &#34;with&#34; statement</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/07/04/heredocs-in-ruby-and-python/?utm_source=site&amp;utm_medium=related">Heredocs in Ruby and Python</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/06/25/micro-journal-simple-git-backed-journal-in-python/?utm_source=site&amp;utm_medium=related">Micro Journal - simple Git-backed journal in Python</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/06/24/vodqa-ncr-maintaining-large-test-suites/?utm_source=site&amp;utm_medium=related">VodQA NCR: Maintaining Large Test Suites</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/06/06/know-your-tools-dont-shoot-yourself-in-the-foot/?utm_source=site&amp;utm_medium=related">Know Your Tools - Don&#39;t Shoot Yourself in the Foot</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/06/05/managing-security-certificates-from-the-console-on-windows-mac-os-x-and-linux/?utm_source=site&amp;utm_medium=related">Managing security certificates from the console - on Windows, Mac OS X and Linux</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/05/11/indian-and-pakistani-cricketers-who-make-better-debuts/?utm_source=site&amp;utm_medium=related">Indian and Pakistani cricketers - who make better debuts?</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/05/04/fixing-flyspell-for-emacs-in-mac-os-x/?utm_source=site&amp;utm_medium=related">Fixing Flyspell for Emacs in Mac OS X</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/04/29/finding-un-merged-commits-with-git-cherry/?utm_source=site&amp;utm_medium=related">Finding un-merged commits with git cherry</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/02/03/bullet-proof-jenkins-setup/?utm_source=site&amp;utm_medium=related">Bullet proof Jenkins setup</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/01/17/why-your-project-should-have-a-getting-started-guide./?utm_source=site&amp;utm_medium=related">Why your project should have a Getting Started guide.</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2012/01/16/debugging-c-sharps-httpwebrequest-100-continue-and-nginx/?utm_source=site&amp;utm_medium=related">Debugging: C Sharp&#39;s HttpWebRequest, 100-Continue and nginx</a></li>
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2011/05/17/wikipedia-page-hopping/?utm_source=site&amp;utm_medium=related">Wikipedia Page Hopping</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2011/03/24/empathy-log-parser/?utm_source=site&amp;utm_medium=related">Empathy Log Parser</a></li>
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2011/03/23/binary-signature-art/?utm_source=site&amp;utm_medium=related">Binary Signature Art</a></li>
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2010/03/16/java-arrays-in-jruby/?utm_source=site&amp;utm_medium=related">Java Arrays in JRuby</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://sdqali.in/blog/2010/01/09/autorun.py-execute-stuff-on-file-change/?utm_source=site&amp;utm_medium=related">Autorun.py - Execute stuff on file change</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
          </ul>
        </aside>
      </div>
    </article>

    <hr>

    
<footer  itemscope="itemscope" itemtype="http://schema.org/WPFooter">
  <div >
    <div >
      <div >
        <ul >
          <li>
            <a href="https://twitter.com/sdqali">
              <span >Twitter</span>
              <span  aria-hidden="true">
                <span ></span>
                <span ></span>
              </span>
            </a>
          </li>
          <li>
            <a href="https://plus.google.com/115900084932734914678">
              <span >Google+</span>
              <span  aria-hidden="true">
                <span ></span>
                <span ></span>
              </span>
            </a>
          </li>
          <li>
            <a href="https://linkedin.com/in/sdqali">
              <span >LinkedIn</span>
              <span  aria-hidden="true">
                <span ></span>
                <span ></span>
              </span>
            </a>
          </li>
          <li>
            <a href="https://github.com/sdqali">
              <span >GitHub</span>
              <span  aria-hidden="true">
                <span ></span>
                <span ></span>
              </span>
            </a>
          </li>
          <li>
            <a href="/index.xml">
              <span >Atom Feed</span>
              <span  aria-hidden="true">
                <span ></span>
                <span ></span>
              </span>
            </a>
          </li>
        </ul>
        <p >&copy; All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86967633-1', 'auto');
  ga('send', 'pageview');

</script>

<link rel="stylesheet" href="/style.css"/>

  </body>
</html>
