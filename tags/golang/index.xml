<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sadique Ali</title>
    <link>http://sdqali.in/tags/golang/index.xml</link>
    <description>Recent content on Sadique Ali</description>
    <generator>Hugo -- gohugo.io</generator>
    <atom:link href="http://sdqali.in/tags/golang/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Thoughts on Open Graph tags</title>
      <link>http://sdqali.in/blog/2015/12/14/thoughts-on-open-graph-tags/</link>
      <pubDate>Mon, 14 Dec 2015 21:47:06 -0500</pubDate>
      
      <guid>http://sdqali.in/blog/2015/12/14/thoughts-on-open-graph-tags/</guid>
      <description>&lt;p&gt;The Open Graph protocol was designed by Facebook to help content creators generate a richer preview of links to their content when they get posted in to Facebook. It was originally proposed as a simple mark up that can be adopted in platforms beyond Facebook. The Open Graph Protocol Design Decisions presentation &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; does a very good job of enumerating the motivation and design decisions made for Open Graph. I have lately been reading and experimenting with these tags and I notice a fair bit of differences when it comes to how these tags are used by different platforms.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;This is by no means an exhaustive list–these are applications I use frequently use and hence encounter the usage of Open Graph tags in. I am deliberately scoping this discussion to a sub set of tags including the following which are the most common tags I have encountered:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;og:title
og:description
og:url
og:image
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;facebook&#34;&gt;Facebook&lt;/h2&gt;

&lt;p&gt;I do not currently have a Facebook account with which I could test and this and Facebook‘s real name policy makes it hard to create test accounts. Facebook‘s &lt;a href=&#34;https://developers.facebook.com/docs/sharing/best-practices&#34;&gt;content sharing best practices&lt;/a&gt; does make it clear that they use the Open Graph tags and considering Facebook created the protocol, I would guess all the tags work as expected.&lt;/p&gt;

&lt;h2 id=&#34;twitter&#34;&gt;Twitter&lt;/h2&gt;

&lt;p&gt;Twitter primarily uses it‘s &lt;a href=&#34;https://dev.twitter.com/cards/overview&#34;&gt;Twitter Cards&lt;/a&gt; functionality to help content creators display richer previews. Twitter Cards defines it‘s own custom tags. However, if these tags are not present in a shared page‘s markup, Twitter does &lt;a href=&#34;https://dev.twitter.com/cards/markup&#34;&gt;fall back&lt;/a&gt; to using the corresponding Open Graph tags.&lt;/p&gt;

&lt;p&gt;However, one of the interesting things about sharing content through Twitter cards is that it allows the content to be attributed to the Twitter accounts of the content author and the site where the content is hosted. This is done via the Twitter Card tags &lt;code&gt;twitter:creator&lt;/code&gt; and &lt;code&gt;twitter:site&lt;/code&gt;. There are no equivalents in the Open Graph world and hence these needs to be explicitly specified for Twitter.&lt;/p&gt;

&lt;h2 id=&#34;slack&#34;&gt;Slack&lt;/h2&gt;

&lt;p&gt;Slack generates rich preview of content using the four Open Graph tags. Slack does this by using it‘s &lt;a href=&#34;https://api.slack.com/robots&#34;&gt;Link Expanding Bot&lt;/a&gt;. In addition to Open Graph tags, Slack looks for oEmbed &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:2&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:2&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; and Twitter Cards.&lt;/p&gt;

&lt;h2 id=&#34;groupme&#34;&gt;GroupMe&lt;/h2&gt;

&lt;p&gt;GroupMe parses Open Graph tags and displays them in chat messages. I have been unable to find documentation as to which other tags they parse.&lt;/p&gt;

&lt;h2 id=&#34;google&#34;&gt;Google+&lt;/h2&gt;

&lt;p&gt;Google‘s &lt;a href=&#34;https://developers.google.com/+/web/snippet/&#34;&gt;recommended method&lt;/a&gt; for providing metadata is Schema.org &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:3&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:3&#34;&gt;3&lt;/a&gt;&lt;/sup&gt; annotations. It does fall back to Open Graph tags if Schema.org annotations are not found. Google also uses schema.org microdata to generate rich snippets in their search results. Bing and Yahoo also support rich snippets through Schema.org annotations.&lt;/p&gt;

&lt;h2 id=&#34;representing-creator-information&#34;&gt;Representing creator information&lt;/h2&gt;

&lt;p&gt;As we saw in the example of Twitter, linking to the creator of content is not something that can be solved purely with Open Graph tags. Open Graph does specify an &lt;code&gt;author&lt;/code&gt; type &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:4&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:4&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;. But in a world where links get shared to multiple platforms, the meaning of this tag is specific to the platform–it could be a Twitter id, a Facebook profile link, a Slack user id, etc. This does force the use of platform specific tags like &lt;code&gt;twitter:site&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;It would be interesting to see if Open Graph would one day support scoped author tags that can specify what &lt;code&gt;author:username&lt;/code&gt; means for different platforms like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f3f3&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;&lt;span style=&#34;color: #330099; font-weight: bold&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;property&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;profile:username&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;scope&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;“twitter.com“&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;@sdqali&amp;quot;&lt;/span&gt; /&amp;gt;
&amp;lt;&lt;span style=&#34;color: #330099; font-weight: bold&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;property&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;profile:username&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;scope&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;“facebook.com“&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;http://facebook.com/some-profile-id&amp;quot;&lt;/span&gt; /&amp;gt;
&amp;lt;&lt;span style=&#34;color: #330099; font-weight: bold&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;property&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;profile:username&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;scope&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;“slack.com“&lt;/span&gt; &lt;span style=&#34;color: #330099&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;@some-slack-id&amp;quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In conclusion, while Open Graph tags are used by a lot of platforms, there are specific pieces of information for which platform specific tags and annotations are needed.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;David Recordon–The Open Graph Protocol Design Decisions on &lt;a href=&#34;http://www.scribd.com/doc/30715288/The-Open-Graph-Protocol-Design-Decisions&#34;&gt;Scribd&lt;/a&gt;.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;oEmbed–Yet another attempt to provide rich representation of URLs. You can find more information on the &lt;a href=&#34;http://oembed.com/&#34;&gt;official site&lt;/a&gt;.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:2&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:3&#34;&gt;Schema.org is an effort to create and promote schemas for structured data. The official site is &lt;a href=&#34;http://schema.org/&#34;&gt;here&lt;/a&gt;.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:3&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:4&#34;&gt;See &lt;code&gt;article:author&lt;/code&gt; &lt;a href=&#34;http://ogp.me/#type_article&#34;&gt;spec&lt;/a&gt; and &lt;code&gt;book:author&lt;/code&gt; &lt;a href=&#34;http://ogp.me/#type_book&#34;&gt;spec&lt;/a&gt;.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:4&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>Configuring Cloud Foundry Java Memory Parameters</title>
      <link>http://sdqali.in/blog/2015/05/20/configuring-cloud-foundry-java-memory-parameters/</link>
      <pubDate>Wed, 20 May 2015 19:42:56 -0700</pubDate>
      
      <guid>http://sdqali.in/blog/2015/05/20/configuring-cloud-foundry-java-memory-parameters/</guid>
      <description>&lt;p&gt;This week I have been trying out Cloud Foundry. Today while trying to set up monitoring through AppDynamics, the sample application that I was using started crashing because of a Java memory error. This blog post discusses how to prevent this from happening by configuring Java memory parameters used by the application.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;This is what was in the Cloud Foundry logs.&lt;/p&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f3f3&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;May &lt;span style=&#34;color: #FF6600&#34;&gt;20&lt;/span&gt; 18:14:51 CloudFoundry 6767b9fd-1874-43cb-a4f8-7470a17c90ae/&lt;span style=&#34;color: #555555&#34;&gt;[&lt;/span&gt;App/2&lt;span style=&#34;color: #555555&#34;&gt;]&lt;/span&gt;:  /bin/bash: line 31:    &lt;span style=&#34;color: #FF6600&#34;&gt;32&lt;/span&gt; Killed                  &lt;span style=&#34;color: #555555&#34;&gt;(&lt;/span&gt; &lt;span style=&#34;color: #003333&#34;&gt;SERVER_PORT&lt;/span&gt;&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #003333&#34;&gt;$PORT&lt;/span&gt; &lt;span style=&#34;color: #003333&#34;&gt;$PWD&lt;/span&gt;/.java-buildpack/open_jdk_jre/bin/java -cp &lt;span style=&#34;color: #003333&#34;&gt;$PWD&lt;/span&gt;/.:&lt;span style=&#34;color: #003333&#34;&gt;$PWD&lt;/span&gt;/.java-buildpack/spring_auto_reconfiguration/spring_auto_reconfiguration-1.4.0_RELEASE.jar -Djava.io.tmpdir&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #003333&#34;&gt;$TMPDIR&lt;/span&gt; -XX:OnOutOfMemoryError&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #003333&#34;&gt;$PWD&lt;/span&gt;/.java-buildpack/open_jdk_jre/bin/killjava.sh -Xmx499200K -Xms499200K -XX:MaxPermSize&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;65M -XX:PermSize&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;65M -Xss1M -javaagent:&lt;span style=&#34;color: #003333&#34;&gt;$PWD&lt;/span&gt;/.java-buildpack/app_dynamics_agent/javaagent.jar -Dappdynamics.agent.applicationName&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;#39;******&amp;#39;&lt;/span&gt; -Dappdynamics.agent.tierName&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;#39;******&amp;#39;&lt;/span&gt; -Dappdynamics.agent.nodeName&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #006699; font-weight: bold&#34;&gt;$(&lt;/span&gt;expr &lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #003333&#34;&gt;$VCAP_APPLICATION&lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;&lt;/span&gt; : &lt;span style=&#34;color: #CC3300&#34;&gt;&amp;#39;.*instance_id[&amp;quot;: ]*&amp;quot;\([a-z0-9]\+\)&amp;quot;.*&amp;#39;&lt;/span&gt;&lt;span style=&#34;color: #006699; font-weight: bold&#34;&gt;)&lt;/span&gt; -Dappdynamics.agent.accountAccessKey&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;****** -Dappdynamics.agent.accountName&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;******* -Dappdynamics.controller.hostName&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;******.saas.appdynamics.com -Dappdynamics.controller.port&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #FF6600&#34;&gt;443&lt;/span&gt; -Dappdynamics.controller.ssl.enabled&lt;span style=&#34;color: #555555&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #336666&#34;&gt;true&lt;/span&gt; org.springframework.boot.loader.JarLauncher &lt;span style=&#34;color: #555555&#34;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It can be seen that the &lt;code&gt;MaxPermSize&lt;/code&gt; is set to &lt;code&gt;65M&lt;/code&gt;. Now, this is not something I configured for this app. This value was assigned by the Java build pack generated by Cloud Foundry when the app was deployed. This can be in the &lt;a href=&#34;https://github.com/cloudfoundry/java-buildpack&#34;&gt;Java build pack&lt;/a&gt;&amp;rsquo;s OpenJDK JRE configuration.&lt;/p&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f3f3&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span style=&#34;color: #0099FF; font-style: italic&#34;&gt;# config/open_jdk_jre.yml&lt;/span&gt;
&lt;span style=&#34;color: #00CCFF; font-weight: bold&#34;&gt;---&lt;/span&gt;
jre:
  version: 1.8.0_+
  repository_root: &lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;{default.repository.root}/openjdk/{platform}/{architecture}&amp;quot;&lt;/span&gt;
memory_calculator:
  version: 1.+
  repository_root: &lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;{default.repository.root}/memory-calculator/{platform}/{architecture}&amp;quot;&lt;/span&gt;
  memory_sizes:
    metaspace: 64m..
    permgen: 64m..
  memory_heuristics:
    heap: 75
    metaspace: 10
    permgen: 10
    stack: 5
    native: 10
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The only way to change this value is to change the configurations of the Java build pack. There are two ways to do this:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Fork the build pack, modify the default memory parameters and use this build pack to deploy.&lt;/li&gt;
&lt;li&gt;Override the memory parameters used by the build pack at deploy time.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Option 1 seems to be an overkill and Cloud Foundry provides a &lt;a href=&#34;https://github.com/cloudfoundry/java-buildpack/blob/master/README.md#configuration-and-extension&#34;&gt;relatively easy method&lt;/a&gt; to override build pack parameters. Option 2 is the approach I decided to take.&lt;/p&gt;

&lt;p&gt;There are &lt;a href=&#34;https://github.com/cloudfoundry/java-buildpack/blob/master/docs/jre-open_jdk_jre.md&#34;&gt;two sets of mappings&lt;/a&gt; that control the various Java memory configurations - &lt;code&gt;memory_sizes&lt;/code&gt; and &lt;code&gt;memory_heuristics&lt;/code&gt;. Together, these two parameters provide a lot of &lt;a href=&#34;https://github.com/cloudfoundry/java-buildpack/blob/master/docs/jre-open_jdk_jre.md#memory-calculation&#34;&gt;flexibility&lt;/a&gt; to control memory allocation. For the particular issue my application faced, all I need to do is to force an appropriate value for &lt;code&gt;MaxPermSize&lt;/code&gt; and this can be done by setting the &lt;code&gt;JBP_CONFIG_OPEN_JDK_MEMORY_CALCULATOR&lt;/code&gt; environment variable as:&lt;/p&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f3f3&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;cf set-env app-name JBP_CONFIG_OPEN_JDK_MEMORY_CALCULATOR &lt;span style=&#34;color: #555555&#34;&gt;[&lt;/span&gt;memory_sizes: &lt;span style=&#34;color: #555555&#34;&gt;{&lt;/span&gt;metaspace: 128m&lt;span style=&#34;color: #555555&#34;&gt;}]&lt;/span&gt;&lt;span style=&#34;color: #AA0000; background-color: #FFAAAA&#34;&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;While this configurations works for applications running under Java &lt;code&gt;1.8&lt;/code&gt;, the right parameter to use for applications running under Java &lt;code&gt;1.7&lt;/code&gt; is &lt;code&gt;permgen&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f3f3&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;cf set-env app-name JBP_CONFIG_OPEN_JDK_JRE &lt;span style=&#34;color: #CC3300&#34;&gt;&amp;#39;[memory_sizes: {metaspace: 128m}]&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;After re-staging the application and making sure the application works as expected, I added this environment variable to the application&amp;rsquo;s &lt;code&gt;manifest.yml&lt;/code&gt; file.&lt;/p&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f3f3&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span style=&#34;color: #00CCFF; font-weight: bold&#34;&gt;---&lt;/span&gt;
applications:
- name: test-app
  ...
  env:
    JBP_CONFIG_OPEN_JDK_MEMORY_CALCULATOR: &lt;span style=&#34;color: #CC3300&#34;&gt;&amp;quot;[memory_sizes:&lt;/span&gt;&lt;span style=&#34;color: #003333&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;{metaspace:&lt;/span&gt;&lt;span style=&#34;color: #003333&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color: #CC3300&#34;&gt;128m}]&amp;quot;&lt;/span&gt;
  ...
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To see how to adjust the memory parameters by modifying the Java build pack, see Haydon Ryan&amp;rsquo;s blog post &lt;a href=&#34;http://www.haydonryan.com/java-8-increasing-metaspace-size-in-cloud-foundry/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>